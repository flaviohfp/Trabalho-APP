package hotel;

//------------Bibliotecas------------

import javafx.application.Application;
import javafx.geometry.HPos;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.scene.paint.Color;
import javafx.scene.text.Font;
import javafx.scene.text.FontWeight;
import javafx.stage.Stage;

import java.sql.*;
import java.time.LocalDate;
import java.time.temporal.ChronoUnit;
import java.util.ArrayList;
import java.util.List;

//-----Criação da Classe que estende aplication do JavaFx.


public class HotelApp extends Application {
    private Stage window;
    private int usuarioLogadoId = -1;
    private int reservaId = -1;
    private double valorQuartoSelecionado = 0.0;
    private double valorPratosSelecionados = 0.0;
    private String quartoSelecionado = "";
    private List<Integer> pratosSelecionadosIds = new ArrayList<>();
    private Label lblValorTotal = new Label("Valor Total: R$0.00");
    private Scene telaInicial, telaLogin, telaCadastro;

    public static void main(String[] args) {
        launch(args);
    }




    // -------------------- Conexão --------------------
    private Connection conectar() {
        try {
            return DriverManager.getConnection(
                    "jdbc:postgresql://localhost:5432/Hotel_db",
                    "postgres",
                    "root"
            );
        } catch (SQLException e) {
            Alert alert = new Alert(Alert.AlertType.ERROR, "Erro ao conectar ao banco! Verifique se o PostgreSQL está rodando.");
            estilizarAlerta(alert);
            alert.showAndWait();
            return null;
        }
    }



    // Estilizar alerts
    private void estilizarAlerta(Alert alert) {
        DialogPane dialogPane = alert.getDialogPane();
        dialogPane.setStyle("-fx-background-color: #e0f7fa; -fx-font-family: Arial; -fx-font-size: 14px;");
        dialogPane.lookupButton(ButtonType.OK).setStyle(
                "-fx-background-color: #00796b; -fx-text-fill: white; -fx-background-radius: 10;"
        );
    }

    @Override
    public void start(Stage primaryStage) {
        window = primaryStage;
        criarTelaLogin();
        criarTelaCadastro();
        criarTelaInicial();

        window.setScene(telaInicial);
        window.setTitle("EasyRoom - Hotel");
        window.setResizable(false);
        window.show();
        window.centerOnScreen();
    }
